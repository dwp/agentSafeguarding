const { expect } = require('chai');

const { runA11yTests, getExamples, renderExample } = require('../../../lib/mochaHelpers');

const examples = getExamples('internal-services-footer');

const componentName = 'footer';

describe('Internal Services Footer', () => {
  it('should display first item of meta list', async () => {
    const output = renderExample('internal-services-footer', componentName, examples.meta);
    await runA11yTests(output);
    expect(output).to.have.string('Item 1');
  });

  it('should display both meta and colum lists', async () => {
    const output = renderExample('internal-services-footer', componentName, examples.default_plus_meta);
    await runA11yTests(output);
    expect(output).to.have.string('Navigation item 1');
    expect(output).to.have.string('Meta item 1');
  });

  it('should display custom meta (text)', async () => {
    const output = renderExample('internal-services-footer', componentName, examples.custom_meta);
    await runA11yTests(output);
    expect(output).to.have.string('GOV.UK Prototype Kit v7.0.1');
  });

  it('should display meta links and custom meta content', async () => {
    const output = renderExample('internal-services-footer', componentName, examples.meta_links_plus_content);
    await runA11yTests(output);
    expect(output).to.have.string('Tortor Fringilla');
    expect(output).to.have.string('Department of Magical Law Enforcement');
  });

  it('should display full footer navigation + meta links + custom meta text', async () => {
    const output = renderExample('internal-services-footer', componentName, examples.default_plus_meta);
    await runA11yTests(output);
    expect(output).to.have.string('Navigation item 6');
    expect(output).to.have.string('Meta item 2');
    expect(output).to.have.string('GOV.UK Prototype Kit v7.0.1');
  });
});
