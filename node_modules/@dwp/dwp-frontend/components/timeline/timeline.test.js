const { expect } = require('chai');

const { runA11yTests, getExamples, renderExample } = require('../../../lib/mochaHelpers');

const examples = getExamples('timeline');

const componentName = 'timeline';

describe('Timeline', () => {
  it('should display no-data state if no data provided', async () => {
    const output = renderExample('timeline', componentName, examples['no-events']);
    await runA11yTests(output);
    expect(output).to.have.string('No events to display.');
  });

  it('should display events if data provided', async () => {
    const output = renderExample('timeline', componentName, examples.default);
    await runA11yTests(output);
    examples.default.events.forEach((event) => {
      Object.keys(event).forEach((_, value) => {
        expect(output).to.have.string(value);
      });
    });
  });

  it('should display a title if provided', async () => {
    const output = renderExample('timeline', componentName, examples.default);
    await runA11yTests(output);
    expect(output).to.have.string(examples.default.title);
  });

  it('should still display events if no title is provided', async () => {
    const output = renderExample('timeline', componentName, examples['no-title']);
    await runA11yTests(output);
    examples['no-title'].events.forEach((event) => {
      Object.keys(event).forEach((_, value) => {
        expect(output).to.have.string(value);
      });
    });
  });
});
